---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import type { PostEntry } from "../content.config.ts";
import PostCard from "../components/PostCard.astro";

const posts: PostEntry[] = await getCollection("posts");
const recent_posts: PostEntry[] = posts.sort(
    (a: PostEntry, b: PostEntry) => b.data.date.getTime() - a.data.date.getTime(),
).slice(0, 3);
---

<BaseLayout>
    <div class="h-150 flex flex-col justify-center px-10">
        <h1 class="text-8xl font-bold">Keblo?</h1>
        <h2 class="text-2xl font-bold text-font-secondary">A collection of blog posts from Kevin Traini</h2>
    </div>
    <div class="py-10">
        <h3 class="text-xl font-bold pb-5">Recent posts</h3>
        <div class="flex">
            {
                recent_posts.map(
                    (post: PostEntry) =>
                        <PostCard {post}/>,
                )
            }
        </div>
    </div>
</BaseLayout>
